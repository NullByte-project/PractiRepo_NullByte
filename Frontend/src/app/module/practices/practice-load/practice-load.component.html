<div class="main-content">
  <h2 class="form-header">Registrar Pr치ctica</h2>

  <form [formGroup]="practiceForm" (ngSubmit)="onSubmit()" class="practice-form">
    <!-- Mensajes de estado -->
    <div *ngIf="errorMessage" class="alert error">{{ errorMessage }}</div>
    <div *ngIf="successMessage" class="alert success">{{ successMessage }}</div>

    <!-- Primera fila: T칤tulo y A침o -->
    <div class="form-row">
      <div class="form-group">
        <label for="title">T칤tulo *</label>
        <input type="text" id="title" formControlName="title" placeholder="Ej: Pr치ctica de laboratorio" />
        <div *ngIf="practiceForm.get('title')?.invalid && practiceForm.get('title')?.touched" class="error-text">
          <span *ngIf="practiceForm.get('title')?.errors?.['required']">El t칤tulo es requerido</span>
          <span *ngIf="practiceForm.get('title')?.errors?.['minlength']">M칤nimo 3 caracteres</span>
        </div>
      </div>

      <div class="form-group">
        <label for="year">A침o *</label>
        <input type="number" id="year" formControlName="year" min="2000" />
        <div *ngIf="practiceForm.get('year')?.invalid && practiceForm.get('year')?.touched" class="error-text">
          <span *ngIf="practiceForm.get('year')?.errors?.['required']">El a침o es requerido</span>
          <span *ngIf="practiceForm.get('year')?.errors?.['min']">El a침o debe ser mayor a 2000</span>
        </div>
      </div>
    </div>

    <!-- Segunda fila: Instituci칩n y Autor -->
    <div class="form-row">
      <div class="form-group">
        <label for="institution">Instituci칩n</label>
        <input type="text" id="institution" formControlName="institution" placeholder="Ej: Universidad Nacional" />
      </div>

      <div class="form-group">
        <label for="author">Autor</label>
        <input type="text" id="author" formControlName="author" placeholder="Ej: Juan P칠rez" />
      </div>
    </div>

    <!-- Tipo de Pr치ctica -->
    <div class="form-group">
      <label for="practice_type">Tipo de Pr치ctica *</label>
      <select id="practice_type" formControlName="practice_type">
        <option value="" disabled selected>Seleccione un tipo</option>
        <option value="Informes de pr치ctica institucional I">Informes de pr치ctica institucional I</option>
        <option value="Informes de pr치ctica institucional II">Informes de pr치ctica institucional II</option>
        <option value="Informes de proyectos de vida familiar y comunitaria I">Informes de proyectos de vida familiar y comunitaria I</option>
        <option value="Informes de proyectos de vida familiar y comunitaria II">Informes de proyectos de vida familiar y comunitaria II</option>
        <option value="Informes de proyectos de vida familiar y comunitaria III">Informes de proyectos de vida familiar y comunitaria III</option>
        <option value="Informes de proyectos de vida familiar y comunitaria IV">Informes de proyectos de vida familiar y comunitaria IV</option>
      </select>
      <div *ngIf="practiceForm.get('practice_type')?.invalid && practiceForm.get('practice_type')?.touched" class="error-text">
        <span *ngIf="practiceForm.get('practice_type')?.errors?.['required']">Seleccione un tipo</span>
      </div>
    </div>

    <!-- Municipio -->
    <div class="form-group">
      <label for="municipality">Municipio</label>
      <input type="text" id="municipality" formControlName="municipality" placeholder="Ej: Bogot치 D.C." />
    </div>

   <!-- Campo de Archivo (como en la imagen 2) -->
   <div class="form-group file-upload">
    <label for="file">Documento *</label>
  
    <!-- Input oculto -->
    <input #fileInput type="file" (change)="onFileChange($event)" accept=".pdf,.doc,.docx,.xls,.xlsx" hidden>
  
    <!-- Bot칩n personalizado -->
    <button 
      type="button" 
      class="select-document-btn" 
      [ngClass]="{ 'has-file': selectedFileName }"
      (click)="fileInput.click()"
    >
      <span *ngIf="selectedFileName">游늯 {{ selectedFileName }}</span>
      <span *ngIf="!selectedFileName">Seleccionar Documento</span>
    </button>
  
    <!-- Mensajes de error -->
    <div *ngIf="practiceForm.get('file')?.invalid && practiceForm.get('file')?.touched" class="error-text">
      <span *ngIf="practiceForm.get('file')?.errors?.['required']">Seleccione un archivo</span>
    </div>
  
    <small>Formatos aceptados: .pdf</small>
  </div>
  



    <!-- Botones -->
    <div class="form-actions">
      <button type="submit" [disabled]="isLoading || practiceForm.invalid" class="submit-btn">Guardar</button>
      <button type="button" (click)="router.navigate(['/practices/list-practices'])" class="cancel-btn">Cancelar</button>
    </div>
  </form>
</div>
